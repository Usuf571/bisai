# üìö BiSAI - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

BiSAI - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥–Ω—ã—Ö –≤–∏–∫—Ç–æ—Ä–∏–Ω –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –º–µ—Ö–∞–Ω–∏–∫–æ–π "–ü–µ—Ä–µ—Ç—è–≥–∏–≤–∞–Ω–∏–µ –∫–∞–Ω–∞—Ç–∞". 

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–î–≤—É—Ö–∫–æ–º–∞–Ω–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - –ö—Ä–∞—Å–Ω–∞—è vs –°–∏–Ω—è—è –∫–æ–º–∞–Ω–¥–∞
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è** - Canvas-based "–ü–µ—Ä–µ—Ç—è–≥–∏–≤–∞–Ω–∏–µ –∫–∞–Ω–∞—Ç–∞"
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏** - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- **–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä–æ–∫–æ–≤
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MVC

```
MODEL (–ú–æ–¥–µ–ª—å)          CONTROLLER (–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä)      VIEW (–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)
==================      =======================      ====================
User                    AuthController              login.php
Test                    TestController              create_test.php
Question                GameController              play.php
GameSession             BaseController              results.php
Answer
GamePlayer
```

### –°–ª–æ–π Model (–ú–æ–¥–µ–ª–∏)

–í—Å–µ –º–æ–¥–µ–ª–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç –æ—Ç `BaseModel`:

```php
class User extends BaseModel {
    protected $table = 'bisai_users';
    
    public static function findByUsername($username) { ... }
    public static function register($data) { ... }
    public function verifyPassword($password) { ... }
}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã BaseModel:**
- `find($id)` - –ù–∞–π—Ç–∏ –ø–æ ID
- `all()` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏
- `where($field, $value)` - –ù–∞–π—Ç–∏ –ø–æ —É—Å–ª–æ–≤–∏—é
- `save()` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å (INSERT –∏–ª–∏ UPDATE)
- `delete()` - –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å

### –°–ª–æ–π Controller (–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã:

```php
class GameController extends BaseController {
    public function play($sessionCode) {
        // –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é
        $session = GameSession::findByCode($sessionCode);
        
        // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
        return $this->render('game/play', [
            'session' => $session,
            'test' => $session->getTest(),
        ]);
    }
}
```

### –°–ª–æ–π View (–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)

PHP —à–∞–±–ª–æ–Ω—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è HTML:

```php
<?php
// /public/views/game/play.php
$session = $session; // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
$test = $test;
?>
<h1><?= escape($test->title) ?></h1>
```

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. HTTP Request
```
Browser ‚Üí POST /api.php?action=submit_answer
```

### 2. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
```php
// /public/api.php
switch ($action) {
    case 'submit_answer':
        $controller = new GameController();
        $controller->submitAnswer();
        break;
}
```

### 3. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
```php
public function submitAnswer() {
    $answerId = $_POST['answer_id'];
    $answer = new Answer();
    $answer->fill(Database::getInstance()->queryOne(...));
    
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    if ($answer->is_correct) { ... }
    
    // –û—Ç–≤–µ—Ç
    $this->json(['success' => true, ...]);
}
```

### 4. –ú–æ–¥–µ–ª—å
```php
// BaseModel.php –≤—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∑–∞–ø—Ä–æ—Å
$stmt = $this->pdo->prepare("SELECT * FROM bisai_answers WHERE id = ?");
$stmt->execute([$answerId]);
```

### 5. HTTP Response
```json
{
    "success": true,
    "is_correct": true,
    "player_score": 5
}
```

---

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    bisai_users                           ‚îÇ
‚îÇ PK: id                                                   ‚îÇ
‚îÇ username (UNIQUE), email (UNIQUE), password_hash         ‚îÇ
‚îÇ first_name, last_name, role, is_active                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ            ‚îÇ            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  bisai_tests   ‚îÇ  ‚îÇ bisai_user_stats  ‚îÇ  ‚îÇ bisai_activity_logs      ‚îÇ
‚îÇ PK: id         ‚îÇ  ‚îÇ PK: id            ‚îÇ  ‚îÇ PK: id                   ‚îÇ
‚îÇ creator_id FK  ‚îÇ  ‚îÇ user_id FK UNIQUE ‚îÇ  ‚îÇ user_id FK               ‚îÇ
‚îÇ title, desc    ‚îÇ  ‚îÇ total_games_won   ‚îÇ  ‚îÇ action, entity_type      ‚îÇ
‚îÇ status, is_pub ‚îÇ  ‚îÇ total_score       ‚îÇ  ‚îÇ created_at               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ 1:N
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   bisai_questions         ‚îÇ
‚îÇ PK: id                    ‚îÇ
‚îÇ test_id FK                ‚îÇ
‚îÇ question_text, question_type
‚îÇ order                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ 1:N
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    bisai_answers          ‚îÇ
‚îÇ PK: id                    ‚îÇ
‚îÇ question_id FK            ‚îÇ
‚îÇ answer_text, is_correct   ‚îÇ
‚îÇ order                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            bisai_game_sessions                          ‚îÇ
‚îÇ PK: id                                                  ‚îÇ
‚îÇ test_id FK, session_code (UNIQUE)                       ‚îÇ
‚îÇ status (waiting|in_progress|finished)                   ‚îÇ
‚îÇ team_red_name, team_blue_name                          ‚îÇ
‚îÇ current_question_index                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ            ‚îÇ            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   bisai_game_players       ‚îÇ  ‚îÇ bisai_player_answers    ‚îÇ
‚îÇ PK: id                     ‚îÇ  ‚îÇ PK: id                  ‚îÇ
‚îÇ game_session_id FK         ‚îÇ  ‚îÇ game_session_id FK      ‚îÇ
‚îÇ user_id FK, player_name    ‚îÇ  ‚îÇ game_player_id FK       ‚îÇ
‚îÇ team_color, score          ‚îÇ  ‚îÇ question_id FK          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ answer_id FK            ‚îÇ
                                ‚îÇ is_correct, answer_time ‚îÇ
                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîê –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
```php
// –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
$hash = password_hash($password, PASSWORD_BCRYPT, ['cost' => 10]);

// –ü—Ä–∏ –≤—Ö–æ–¥–µ
if (password_verify($password, $stored_hash)) {
    // –ü–∞—Ä–æ–ª—å –≤–µ—Ä–Ω—ã–π
}
```

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
```php
// ‚ùå –û–ü–ê–°–ù–û
$sql = "SELECT * FROM users WHERE id = $id";

// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
$stmt = $pdo->prepare("SELECT * FROM users WHERE id = ?");
$stmt->execute([$id]);
```

### 3. –°–µ—Å—Å–∏–æ–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```php
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏—é
$_SESSION['user_id'] = $user->id;

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
$user = getAuthUser();
if (!$user) {
    redirect('/login.php');
}
```

### 4. –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞
```php
// ‚ùå –û–ü–ê–°–ù–û - XSS
<h1><?= $userInput ?></h1>

// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
<h1><?= escape($userInput) ?></h1>
```

---

## üöÄ API Endpoints

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

#### POST `/api.php?action=login`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `username` (string, required)
- `password` (string, required)

**–û—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "user_id": 1,
    "username": "john_doe"
}
```

#### POST `/api.php?action=register`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `username` (string, required, min:3, max:50)
- `email` (string, required, email)
- `password` (string, required, min:6)
- `password_confirm` (string, required)

---

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏

#### POST `/api.php?action=create_test`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `title` (string, required)
- `description` (string, required)
- `difficulty` (easy|medium|hard)
- `category` (string)

#### POST `/api.php?action=add_question`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `test_id` (int, required)
- `question_text` (string, required)
- `question_type` (multiple_choice|true_false|short_answer)
- `answers[]` (array of {text, is_correct})

---

### –ò–≥—Ä–∞

#### POST `/api.php?action=create_game_session`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `test_id` (int, required)
- `team_red_name` (string, required)
- `team_blue_name` (string, required)

**–û—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "session_code": "ABC123",
    "session_id": 1,
    "redirect": "/public/play.php?code=ABC123"
}
```

#### POST `/api.php?action=add_player`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `session_code` (string, required)
- `player_name` (string, required)
- `team_color` (red|blue, required)

#### POST `/api.php?action=get_game_state`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `session_code` (string, required)

**–û—Ç–≤–µ—Ç:**
```json
{
    "success": true,
    "status": "in_progress",
    "team_red": {
        "name": "Red Team",
        "score": 3,
        "players": [...]
    },
    "team_blue": {
        "name": "Blue Team",
        "score": 2,
        "players": [...]
    }
}
```

#### POST `/api.php?action=submit_answer`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `session_code` (string, required)
- `player_id` (int, required)
- `answer_id` (int, required)

---

## üéÆ JavaScript API

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
```javascript
// –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
initGameSetup(testId);

// –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–≥—Ä–µ
initGame(sessionCode);
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
```javascript
await loadQuestion(sessionCode);
```

### –í—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞
```javascript
selectAnswer(button, answerId);
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
```javascript
await submitAnswer(sessionCode);
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞—Ç–∞
```javascript
updateRope(scoreDifference);
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### /config
- **app.php** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–∑–≤–∞–Ω–∏–µ, –≤–µ—Ä—Å–∏—è, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã)
- **db.php** - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MySQL
- **constants.php** - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–ø—É—Ç–∏, —Å—Ç–∞—Ç—É—Å—ã, —Ä–æ–ª–∏)

### /database
- **migrations/001_create_initial_tables.sql** - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- **seeders/** - –ü–∞–ø–∫–∞ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### /includes
- **Database.php** - Singleton –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î (PDO wrapper)
- **autoload.php** - –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **functions.php** - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (escape, hash, format –∏ —Ç.–¥.)
- **auth.php** - –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

### /models
- **BaseModel.php** - –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)
- **User.php** - –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- **Test.php** - –ú–æ–¥–µ–ª—å —Ç–µ—Å—Ç–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—É–±–ª–∏–∫–∞—Ü–∏—è)
- **Question.php** - –ú–æ–¥–µ–ª—å –≤–æ–ø—Ä–æ—Å–∞ —Å –º–µ—Ç–æ–¥–∞–º–∏ —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–≤–µ—Ç–∞–º–∏
- **GameSession.php** - –ú–æ–¥–µ–ª—å –∏–≥—Ä–æ–≤–æ–π —Å–µ—Å—Å–∏–∏ –∏ –∏–≥—Ä–æ–∫–æ–≤

### /controllers
- **BaseController.php** - –ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (render, json, redirect)
- **AuthController.php** - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **TestController.php** - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–∞–º–∏
- **GameController.php** - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

### /public
- **index.php** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤
- **login.php** - –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
- **register.php** - –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **logout.php** - –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- **dashboard.php** - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **create_test.php** - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞
- **edit_test.php** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞
- **delete_test.php** - –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
- **play.php** - –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –∫–∞–Ω–∞—Ç–∞
- **api.php** - API —Ç–æ—á–∫–∞ –¥–ª—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤

#### /public/assets
- **/css/main.css** - –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **/js/main.js** - –û—Å–Ω–æ–≤–Ω–æ–π JavaScript (AJAX, —Ñ–æ—Ä–º—ã, –º–æ–¥–∞–ª—ã)
- **/js/game.js** - –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã (–≤–æ–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã, —Å—á–µ—Ç)
- **/js/tug-of-war.js** - Canvas –∞–Ω–∏–º–∞—Ü–∏—è –∫–∞–Ω–∞—Ç–∞
- **/audio/** - –ü–∞–ø–∫–∞ –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –º—É–∑—ã–∫–∏
- **/images/** - –ü–∞–ø–∫–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

#### /public/views
- **layout/header.php** - –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫
- **layout/footer.php** - –ü–æ–¥–≤–∞–ª —Å–∞–π—Ç–∞
- **auth/login.php** - –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤—Ö–æ–¥–∞
- **auth/register.php** - –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **tests/list.php** - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- **tests/create.php** - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–∞
- **tests/edit.php** - –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–∞
- **game/setup.php** - –í–≤–æ–¥ –∏–º–µ–Ω –∫–æ–º–∞–Ω–¥ –ø–µ—Ä–µ–¥ –∏–≥—Ä–æ–π
- **game/play.php** - –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PhpMyAdmin

### –®–∞–≥–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –ë–î:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ phpMyAdmin**
   ```
   http://localhost/phpmyadmin
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –ë–î**
   - –ù–∞–∂–º–∏—Ç–µ "–ù–æ–≤–∞—è –ë–î"
   - –í–≤–µ–¥–∏—Ç–µ: `bisai_db`
   - –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É: `utf8mb4_unicode_ci`

3. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "SQL"
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `database/migrations/001_create_initial_tables.sql`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–æ–¥
   - –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL —Ä–µ–¥–∞–∫—Ç–æ—Ä
   - –ù–∞–∂–º–∏—Ç–µ "–í—ã–ø–æ–ª–Ω–∏—Ç—å"

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã**
   - –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã (users, tests, questions –∏ —Ç.–¥.)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/register.php`
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –ë–î

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞**
   - –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/create_test.php`
   - –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
   - –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–µ—Å—Ç

3. **–ò–≥—Ä–∞**
   - –í—ã–±—Ä–∞—Ç—å —Ç–µ—Å—Ç –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   - –í–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
   - –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–æ–≤
   - –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫:

```php
// –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É –≤ config/app.php
'debug' => true,

// –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
log_action($userId, 'submit_answer', 'player', $playerId, 'Answer: ' . $answerId);
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ –ë–î:

```sql
SELECT * FROM bisai_activity_logs 
ORDER BY created_at DESC 
LIMIT 50;
```

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏:

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î**
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ç–æ–ª–±—Ü—ã
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis/Memcached)

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   ```php
   // –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
   $tests = apcu_fetch('public_tests');
   if ($tests === false) {
       $tests = Test::getPublished();
       apcu_store('public_tests', $tests, 3600);
   }
   ```

3. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π (RabbitMQ)
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ñ–æ–Ω–µ

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–º–æ—â–∏ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö:

- üìß Email: support@bisai.local
- üêõ GitHub Issues: github.com/Usuf571/bisai
- üí¨ Discord: [–°–µ—Ä–≤–µ—Ä BiSAI]

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-10  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ
